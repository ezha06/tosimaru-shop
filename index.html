<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ambil Lokasi Otomatis</title>
</head>
<body>
  <h2>üìç Tes Ambil Lokasi Otomatis</h2>
  <div id="status">Mengambil lokasi...</div>
  <div id="coords"></div>

  <script>
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function(position) {
            let lat = position.coords.latitude;
            let lon = position.coords.longitude;
            document.getElementById("status").innerHTML = "‚úÖ Lokasi berhasil didapat";
            document.getElementById("coords").innerHTML = "Koordinat: " + lat + ", " + lon;

            // simpan ke localStorage agar bisa dipanggil di Jagel
            localStorage.setItem("userLocation", JSON.stringify({lat: lat, lon: lon}));
          },
          function(error) {
            document.getElementById("status").innerHTML = "‚ùå Gagal mengambil lokasi: " + error.message;
          }
        );
      } else {
        document.getElementById("status").innerHTML = "‚ùå Browser tidak mendukung geolokasi";
      }
    }

    // panggil otomatis saat halaman dibuka
    window.onload = getLocation;
  </script>
</body>
</html>